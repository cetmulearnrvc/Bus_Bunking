<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Bus Route Simulator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }
        
        h1 {
            text-align: center;
            color: #333;
        }
        
        .map-container {
            position: relative;
            width: 800px;
            height: 500px;
            margin: 20px auto;
            background-color: #fff;
            border: 2px solid #333;
            overflow: hidden;
        }
        
        .road {
            position: absolute;
            background-color: #555;
        }
        
        .horizontal {
            height: 20px;
        }
        
        .vertical {
            width: 20px;
        }
        
        .bus-stop {
            position: absolute;
            width: 12px;
            height: 12px;
            background-color: #ff5722;
            border-radius: 50%;
            transform: translate(-6px, -6px);
        }
        
        .bus {
            position: absolute;
            width: 30px;
            height: 15px;
            border-radius: 4px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 10px;
            color: white;
            transform: translate(-15px, -7px);
            transition: all 1s linear;
        }
        
        .bus-a {
            background-color: #4285f4;
            z-index: 10;
        }
        
        .bus-b {
            background-color: #ea4335;
            z-index: 9;
        }
        
        .controls {
            text-align: center;
            margin: 20px;
        }
        
        button {
            padding: 10px 20px;
            margin: 0 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <h1>City Bus Route Map</h1>
    
    <div class="map-container" id="map">
        <!-- Roads and bus stops will be added here -->
    </div>
    
    <div class="controls">
        <button id="startBtn">Start Buses</button>
        <button id="resetBtn" disabled>Reset</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const map = document.getElementById('map');
            const startBtn = document.getElementById('startBtn');
            const resetBtn = document.getElementById('resetBtn');
            
            // Define routes for both buses with a common stop
            const routeA = [
                {x: 50, y: 50},
                {x: 150, y: 50},
                {x: 150, y: 150},
                {x: 250, y: 150}, // Common stop
                {x: 350, y: 150},
                {x: 350, y: 250},
                {x: 450, y: 250}
            ];

            const routeB = [
                {x: 50, y: 450},
                {x: 150, y: 450},
                {x: 150, y: 350},
                {x: 250, y: 350},
                {x: 250, y: 150}, // Common stop
                {x: 350, y: 150},
                {x: 450, y: 150}
            ];

            let animationInterval;
            let currentPositionA = 0;
            let currentPositionB = 0;

            // Initialize map and buses
            createMap();
            const busA = createBus('A', routeA[0].x, routeA[0].y, 'bus-a');
            const busB = createBus('B', routeB[0].x, routeB[0].y, 'bus-b');

            startBtn.addEventListener('click', startBuses);
            resetBtn.addEventListener('click', resetBuses);

            function createMap() {
                // Create main roads
                createRoad(0, 50, 800, 20);   // Top horizontal
                createRoad(0, 150, 800, 20);  // Middle horizontal
                createRoad(0, 250, 800, 20);  // Bottom horizontal
                createRoad(0, 350, 800, 20);  // Lower horizontal
                createRoad(50, 0, 20, 500);   // Left vertical
                createRoad(150, 0, 20, 500);  // Middle vertical
                createRoad(250, 0, 20, 500);  // Center vertical
                createRoad(350, 0, 20, 500);  // Right vertical
                createRoad(450, 0, 20, 500);  // Far right vertical

                // Create bus stops
                routeA.concat(routeB).forEach(point => {
                    createBusStop(point.x, point.y);
                });
            }

            function createRoad(x, y, width, height) {
                const road = document.createElement('div');
                road.className = `road ${width > height ? 'horizontal' : 'vertical'}`;
                road.style.left = `${x}px`;
                road.style.top = `${y}px`;
                road.style.width = `${width}px`;
                road.style.height = `${height}px`;
                map.appendChild(road);
            }

            function createBusStop(x, y) {
                const stop = document.createElement('div');
                stop.className = 'bus-stop';
                stop.style.left = `${x}px`;
                stop.style.top = `${y}px`;
                map.appendChild(stop);
            }

            function createBus(label, x, y, className) {
                const bus = document.createElement('div');
                bus.className = `bus ${className}`;
                bus.textContent = label;
                bus.style.left = `${x}px`;
                bus.style.top = `${y}px`;
                map.appendChild(bus);
                return bus;
            }

            function startBuses() {
                startBtn.disabled = true;
                resetBtn.disabled = true;
                currentPositionA = 0;
                currentPositionB = 0;

                animationInterval = setInterval(() => {
                    // Move Bus A
                    if (currentPositionA < routeA.length - 1) {
                        currentPositionA++;
                        busA.style.left = routeA[currentPositionA].x + 'px';
                        busA.style.top = routeA[currentPositionA].y + 'px';
                    }

                    // Move Bus B
                    if (currentPositionB < routeB.length - 1) {
                        currentPositionB++;
                        busB.style.left = routeB[currentPositionB].x + 'px';
                        busB.style.top = routeB[currentPositionB].y + 'px';
                    }

                    // Stop when both buses reach their destinations
                    if (currentPositionA >= routeA.length - 1 && 
                        currentPositionB >= routeB.length - 1) {
                        clearInterval(animationInterval);
                        resetBtn.disabled = false;
                    }
                }, 1000);
            }

            function resetBuses() {
                clearInterval(animationInterval);
                busA.style.left = routeA[0].x + 'px';
                busA.style.top = routeA[0].y + 'px';
                busB.style.left = routeB[0].x + 'px';
                busB.style.top = routeB[0].y + 'px';
                startBtn.disabled = false;
                resetBtn.disabled = true;
                currentPositionA = 0;
                currentPositionB = 0;
            }
        });
    </script>
</body>
</html>